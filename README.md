# fe-shopping

## 1주차 - 2

task list

- [ ] +) 최근 검색어는 localStorage 에 저장해서 저장하고, 불러오기
- [x] 키보드 방향키 위/아래 이동시에 이동하기
- [x] 전체 를 클릭하면 하단에 카테고리 펼치기
- [x] 선택시 검색 진행(실제 동작 X)
- [ ] 캐러셀

### 키보드 위/아래 이동시에 이동

- 쿠팡에서는 맨 아래에서 아래 이동시 아무 이동효과가 없음

  - 맨 위에서 위로 이동시 원래 입력했던 키워드로 돌아옴

- 위 처럼 동작하게 하려면 `SearchInput` 과 `SearchSuggestion` 이 위/아래 이벤트를 통한 이동값을 공유해야 한다고 생각했음

- 현재 `keyup` 이벤트시 `최근검색어` 혹은 `추천검색어` 를 보이게 하는 로직이 있어서 키보드 위/아래 이벤트는 따로 `keydown` 이벤트에서 진행하려고 했음

  - 한번에 key 입력시 keydown-keyup 이벤트가 동시에 일어나서 특정 키보드입력을 예외처리하지 않으면 `setState` 가 두 번 일어나는 현상이 생김
  - keyup 이벤트 내부에서 `ArrowDown`, `ArrowUp` 키보드 이벤트를 제외하고 진행하기로 예외처리함
  - ?) 실제 keyboard 이벤트를 핸들링할 때, 다양한 키보드 이벤트상황(keyup, keydown, keypress..)에 맞춰서 이벤트를 나눠서 달아주는지가 궁금했습니다. 하나의 이벤트(keyup) 에서만 핸들링한다면 핸들링 함수가 처리하는 로직이 너무 많아진다고 생각해서 분리해보았는데 분리했을 때 일어나는 부수효과가 더 치명적이지 않을까 란 생각도 들었습니다.

- 아래 이벤트 시에는 커서가 맨 오른쪽으로 가는데, 위 이벤트 시에는 커서가 맨 왼쪽으로 감??

  - 딜레이를 줘서 해결
  - DOM 에 range 설정을 해주는 해당 코드와 DOM 이 실제로 뿌려지는 시점이 차이가 있어서 delay 를 사용하지 않으면 해당 코드가 무시되는것 처럼 보이는걸로 예상이 되는데 자세하게는 모르겠어서 찾아볼 생각입니다..

  ```js
  // 전
  $input.setSelectionRange(len, len);
  // 후
  const moveCursorToEnd = ($input, len) => {
    delay(0).then(() => {
      $input.setSelectionRange(len, len);
    });
  };
  ```

- `전체` 버튼을 눌렀을 때 촤르륵 내려오는 효과를 클릭 이벤트와 transition 을 활용해서 해보고 싶었고 안에 li 태그가 많을 때에 각 요소가 시간차로 visibility 가 바뀌게 보여야 자연스러워 보일 것 같아서 delay 함수를 활용해서 구현해보았는데 delay 로직이 많은게 자연스럽진 않은 것 같아서 다른 분들 코드를 참고해서 고쳐볼 생각입니다.
  - 자연스럽지 않다고 느낀것은 많은 delay 로직 이후 실행되는 코드가 있다면 delay 를 await 한 이후 코드의 실행이 자연스러운 흐름으로 동작하지 않을 것이라 생각했습니다.
