# [ 데모페이지 ](https://hoi-coupang.herokuapp.com/)

# 할 일 TASK

- [x] 상속 관계 분리
- [x] M V 분리

## 1. 상속 관계 분리

### Goal :

- 드롭박스와 헤더-메인 간의 상속을 분리한다.

### how :

1. 헤더메인에서 직접 사용한 모든 드롭박스 메소드는 드롭박스를 생성해서 사용하는 방식으로 변경
2. 검색 메뉴와 검색창 모두 헤더메인과는 무관한 새로운 뷰 라고 할 수 있기 때문에 별도의 뷰로 분리
3. 기존 헤더메인에 저장했던 드롭박스 관련 정보는 드롭박스 자체의 컨스트럭터로 생성
4. 드롭박스에 정보를 입력하는 매개변수는 객체로 형식을 지정

### Keep :

- HeaderMain.prototype = Object.assign(Object.create(DropBox.prototype), headerMainMethod);
- Object.assing 을 이용해서 상속이 가능하다.

## 2. M V 분리

### 기준 : 단순히 mv\* 패턴을 따라하지 말자

### View :

- header-main.js에 있는 뷰들을 분리 ( 두 개의 드롭박스와 기본 헤더 메인 뷰. 총 세 개로 분리)
- 각 뷰는 자기 화면에 필요한 기본 템플릿과 템플릿을 그려주는 로직을 가지고 있음
- 검색메뉴 및 검색창 뷰는 자기 자신의 드롭박스를 호출해 줄 메소드를 지님 (컨트롤러에서 해당 뷰가 그려진 후 메소드를 호출해서 이벤트를 등록)

### Model :

- eventCategory는 서버에서 데이터를 요청해 와서 이벤트 카테고리 영역에 해당하는 템플릿으로 만들어서 프로미스를 리턴한다. 이후 로직은 컨트롤러에서 이어서 진행
- searchBar 모델은 검색창과 관련된 두개의 뷰에서 사용할 데이터를 담고 있음
  - menu 메소드를 호출하면 서버로부터 메뉴 데이터를 패치해서 파싱한 후 리턴
  - content 메소드를 호출하면 자동완성 키워드를 배열로 만들어서 리턴

### Controller :

- 필요한 뷰와 모델을 모두 호출한 후 컨트롤러의 렌더 함수를 실행
- 화면 최상단 (topBar) 생성
- 헤더메인 영역을 그려준 후 렌더가 완료되면 해당 영역에 필요한 두 개의 검색창 뷰 (검색메뉴, 검색컨텐츠) 를 렌더한다.

### 진행상항 :

- 저번주 일정이 바빠 미션을 전혀 하지 못했습니다. 10일만에 제 코드를 다시 읽어보니 그냥 다른사람이 짠 코드처럼 느껴졌습니다. 나름대로의 기준으로 구현했었기때문에 코드를 이해할 수는 있었지만, 분리한다는 개념이 와닿지는 않았습니다. 리뷰를 받으면서 뷰가 굉장히 크고 복잡한 상황이고, 뷰가 다른 뷰와 직접 참조관계에 놓여있다는 사실을 인지해 우선은 뷰 분리 작업부터 진행했습니다.
- 헤더 안에 속해있었던 작은 뷰(검색창, 검색메뉴)등을 별도의 뷰로 분리
- 서버로부터 fetch받아오는 데이터는 모델로 분리. 모델은 또 다른 뷰에서도 사용될 수 있는 데이터라고 생각해서 뷰나 컨트롤러에 의존하지 않도록 구성했
- 뷰끼리 직접 참조하지 않도록 컨트롤러를 별도로 구성
- 뷰가 모델로부터 데이터를 받기 위해서는 컨트롤러를 통해서만 받을 수 있도록 구성

처음부터 헤더와 메인을 분리해서 작업을 진행했었기 때문에 해당 구조를 완전히 엎지는 않았습니다. 현재 m-v 분리 작업은 헤더에서만 진행했으며 메인폴더에서 추가적인 작업을 하기보다 우선 피드백을 받은 후 다음 스탭에 대한 방향을 결정할 생각입니다. 메가드롭박스나 디바운스, 쓰로틀 등 미구현 기능 구현은 어떻게든 할 수 있겠는데 폴더구조나 관심사의 분리에 대한 능력이 더 부족하다고 생각해서 추가적인 학습을 진행할 생각입니다.
